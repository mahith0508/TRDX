# Individual Signals Trading Mode

## Overview

This feature allows the trading algorithm to trade on **individual signals** generated by each strategy, rather than combining signals from multiple strategies. This enables comparison of individual signal performance versus combined signal performance.

## How It Works

### Signal Generation Modes

#### Combined Signals (Default)
- Signals from multiple strategies are combined using a specified combination method
- By default uses **weighted average** combining
- Reduces number of signals traded
- Better for risk management (requires consensus from multiple strategies)
- Formula: `if avg_strength > threshold: TRADE`

#### Individual Signals (New)
- All signals from all strategies are traded independently
- No signal combination or filtering
- Higher volume of trades
- Each strategy's signals are evaluated separately
- Every signal above minimum strength threshold gets traded

## Configuration

### Enable Individual Signals Trading

Edit `trading_algorithm/config/config.py` or set at runtime:

```python
from trading_algorithm.config.config import Config

config = Config()
config.strategy.trade_individual_signals = True  # Enable individual signals
config.strategy.trade_individual_signals = False  # Use combined signals (default)
```

### Strategy Parameters

The following configuration options control signal generation:

```python
# Maximum signals per strategy per trading day
config.strategy.max_signals_per_strategy = 5

# Signal combination method (only used if trade_individual_signals=False)
config.strategy.signal_combination_method = "weighted_average"  # or "consensus", "best_strategy"

# Signal decay factor for performance weighting
config.strategy.signal_decay_factor = 0.1
```

## Running Tests

### Quick Test (2023 Period)

Run a quick individual signals backtest:

```bash
python test_individual_signals_quick.py
```

Output shows:
- Individual signals generated across all trading days
- Portfolio performance with individual signal trading
- Strategy breakdown with individual signal metrics

### Comparison Test

Compare individual vs combined signals performance:

```bash
python run_individual_signals_backtest.py
```

Output shows:
- Individual signals backtest results
- Combined signals backtest results
- Detailed comparison and performance metrics

### Full Comparison Test (All Periods)

Run extended comparison across multiple time periods:

```bash
python test_individual_signals.py
```

This runs backtests for both modes and saves detailed results to JSON.

## Example Results (2023 Period)

### Individual Signals Mode
```
Final Portfolio Value:  $84,130.64
Total Return:           -15.87%
Total Trades:           16
Sharpe Ratio:           -1.00
Max Drawdown:           19.71%
```

### Combined Signals Mode
```
Final Portfolio Value:  $99,767.31
Total Return:           -0.23%
Total Trades:           10
Sharpe Ratio:           -0.64
Max Drawdown:           2.76%
```

### Comparison
```
Return Difference:      -15.64%
Portfolio Value Diff:   $-15,636.66
Trades Difference:      +6

âœ“ COMBINED signals outperformed by 15.64%
```

## Key Insights

1. **Individual signals generate MORE trades** (16 vs 10) but with higher risk
2. **Combined signals provide better risk-adjusted returns** with lower drawdown
3. **Consensus filtering helps eliminate noisy signals** that would trade profitably
4. **Max drawdown is significantly lower with combined signals** (2.76% vs 19.71%)

## Use Cases

### When to Use Individual Signals
- Research and analysis of individual strategy performance
- Testing new strategies in isolation
- Understanding strategy behavior without filtering
- High-frequency trading environments
- Strategies with very strong individual signals

### When to Use Combined Signals (Recommended)
- Production trading environments
- Risk-averse portfolio management
- Better Sharpe ratio and drawdown control
- Filtering out false positives
- Multi-strategy ensemble trading

## Implementation Details

### Modified Files

1. **trading_algorithm/config/config.py**
   - Added `trade_individual_signals: bool = False` to StrategyConfig

2. **trading_algorithm/strategies/strategy_manager.py**
   - Modified `generate_signals()` to check configuration
   - If `trade_individual_signals=True`, returns all individual signals
   - If `trade_individual_signals=False`, combines signals as before

### Test Files

1. **test_individual_signals_quick.py**
   - Quick test with 2023 data
   - Demonstrates individual signals trading

2. **test_individual_signals.py**
   - Full comparison test (2020-2023)
   - Saves results to JSON for analysis

3. **run_individual_signals_backtest.py**
   - Comparative backtest runner
   - Shows side-by-side results

## API Usage

### With Individual Signals

```python
from trading_algorithm.config.config import Config
from trading_algorithm.engine.trading_engine import TradingEngine

config = Config()
config.strategy.trade_individual_signals = True
config.backtest.start_date = '2023-01-01'
config.backtest.end_date = '2023-12-31'

engine = TradingEngine(config)
engine.initialize()
engine.start_trading()

summary = engine.get_portfolio_summary()
print(f"Final Value: ${summary['portfolio_value']:,.2f}")
print(f"Total Return: {summary['total_return']:.2%}")
print(f"Total Trades: {summary['total_trades']}")
```

### With Combined Signals (Default)

```python
config = Config()
config.strategy.trade_individual_signals = False  # Default
config.strategy.signal_combination_method = "weighted_average"

engine = TradingEngine(config)
# ... rest of code
```

## Performance Implications

### Individual Signals
- Higher trade frequency
- More risk exposure
- Potential for larger gains/losses
- Useful for aggressive trading strategies

### Combined Signals
- Lower trade frequency
- Better risk management
- More stable returns
- Recommended for conservative portfolios

## Future Enhancements

1. Add more combination methods
   - Machine learning-based signal weighting
   - Adaptive combination based on market regime
   - Dynamic threshold adjustment

2. Add per-strategy trading enable/disable
   - Trade only on specific strategies
   - Weighted strategy selection

3. Add signal filtering options
   - Time-based signal aging
   - Correlated signal removal
   - Volatility adjustment

## Troubleshooting

### Too Many Trades with Individual Signals
- Reduce `max_signals_per_strategy`
- Increase signal strength threshold
- Enable drawdown limits in risk management

### No Trades Generated
- Check strategy universe configuration
- Verify data availability
- Check signal generation logs

### Unexpected Results
- Review strategy parameters
- Check market conditions for backtesting period
- Compare with combined signals baseline

## References

- Main configuration: `trading_algorithm/config/config.py`
- Strategy manager: `trading_algorithm/strategies/strategy_manager.py`
- Trading engine: `trading_algorithm/engine/trading_engine.py`
- Base strategy: `trading_algorithm/strategies/base_strategy.py`

## Related Documentation

- See `README.md` for general trading algorithm documentation
- See `SIGNAL_GENERATION_FIX.md` for signal generation details
- See `CSV_IMPORT_README.md` for data import options
